<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Survey</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="app/public/css/style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>
    <div class="container content">
    <h1><b>Survey</b></h1>
    <HR>
    <h3><b>About You</b></h3>
    <p>Answer on a scale of 1-5 on what you feel is suitable to the question.</p>
        <form>
            <div class="form-group">
                <label for="user">Name (Required)</label>
                <input id="user-name" type="text" class="form-control" placeholder="">
            </div>

            <div class="form-group">
                <label for="user">Link to Photo (Required)</label>
                <input id="user-photo" type="text" class="form-control" placeholder="">
            </div>

            <div class="form-group">
                <label for="question1">1. I prefer night over day.</label>
                <select class="form-control" id="question1">
                <option value="empty"></option>
                <option value="1" id="qa1">1 - Strongly Disagree</option>
                <option value="2" id="qa1">2</option>
                <option value="3" id="qa1">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa1">4</option>
                <option value="5" id="qa1">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question2">2. I always enjoy being with a group of friends whenever I got out rather than by myself.</label>
                <select class="form-control" id="question2">
                <option value="empty"></option>
                <option value="1" id="qa2">1 - Strongly Disagree</option>
                <option value="2" id="qa2">2</option>
                <option value="3" id="qa2">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa2">4</option>
                <option value="5" id="qa2">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question3">3. I prefer cats over dogs.</label>
                <select class="form-control" id="question3">
                <option value="empty"></option>
                <option value="1" id="qa3">1 - Strongly Disagree</option>
                <option value="2" id="qa3">2</option>
                <option value="3" id="qa3">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa3">4</option>
                <option value="5" id="qa3">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question4">4. I prefer the moon more than the stars.</label>
                <select class="form-control" id="question4">
                <option value="empty"></option>
                <option value="1" id="qa4">1 - Strongly Disagree</option>
                <option value="2" id="qa4">2</option>
                <option value="3" id="qa4">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa4">4</option>
                <option value="5" id="qa4">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question5">5. The color black is better than any other colors.</label>
                <select class="form-control" id="question5">
                <option value="empty"></option>
                <option value="1" id="qa5">1 - Strongly Disagree</option>
                <option value="2" id="qa5">2</option>
                <option value="3" id="qa5">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa5">4</option>
                <option value="5" id="qa5">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question6">6. I consider myself more of a leader than a follower.</label>
                <select class="form-control" id="question6">
                <option value="empty"></option>
                <option value="1" id="qa6">1 - Strongly Disagree</option>
                <option value="2" id="qa6">2</option>
                <option value="3" id="qa6">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa6">4</option>
                <option value="5" id="qa6">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question7">7. I will fight for my family and close friends.</label>
                <select class="form-control" id="question7">
                <option value="empty"></option>
                <option value="1" id="qa7">1 - Strongly Disagree</option>
                <option value="2" id="qa7">2</option>
                <option value="3" id="qa7">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa7">4</option>
                <option value="5" id="qa7">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question8">8. I would rather visit New York than San Francisco.</label>
                <select class="form-control" id="question8">
                <option value="empty"></option>
                <option value="1" id="qa8">1 - Strongly Disagree</option>
                <option value="2" id="qa8">2</option>
                <option value="3" id="qa8">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa8">4</option>
                <option value="5" id="qa8">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question9">9. I prefer to sleep in during my day off from work/school.</label>
                <select class="form-control" id="question9">
                <option value="empty"></option>
                <option value="1" id="qa9">1 - Strongly Disagree</option>
                <option value="2" id="qa9">2</option>
                <option value="3" id="qa9">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa9">4</option>
                <option value="5" id="qa9">5 - Strongly Agree</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question10">10. I like to sing.</label>
                <select class="form-control" id="question10">
                <option value="empty"></option>
                <option value="1" id="qa10">1 - Strongly Disagree</option>
                <option value="2" id="qa10">2</option>
                <option value="3" id="qa10">3 - Neither Disagree/Agree</option>
                <option value="4" id="qa10">4</option>
                <option value="5" id="qa10">5 - Strongly Agree</option>
                </select>
            </div>
        </form>
    </div>
    
    <div class="text-center">
    <button id="submitBtn" type="submit" class="btn btn-success btn-lg" data-toggle="modal"
    data-target="#friendMatch">Submit</button>
    </div>
                
    <!-- Modal after survey completion -->
    <div id="friendMatch" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="mod-head">Your New Best Friend!</h3>
                </div>

                <div class="modal-body">
                    <p id="newFriend"></p>
                    <img id="nfPic" src="">
                </div>

                <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Javascript starts here -->
    <script type="text/javascript">

        $('#submitBtn').on('click', function(event) {
            event.preventDefault();

            var userInput = {
                name: $('#user-name').val().trim(),
                photo: $('#user-photo').val().trim(), 
                scores: [
                    $('#question1').val(),
                    $('#question2').val(),
                    $('#question3').val(),
                    $('#question4').val(),
                    $('#question5').val(),
                    $('#question6').val(),
                    $('#question7').val(),
                    $('#question8').val(),
                    $('#question9').val(),
                    $('#question10').val()
                ]
            };
            console.log(userInput);

            $.post('/api/friends', userInput, function(data) {
                console.log(data);

                $('#newFriend').text(data.name);
                $('#nfPic').attr('src', data.photo);
                $('#friendMatch').modal('show');

                // clear all the fields
                $('#user-name').val('');
                $('#user-photo').val('');
                $('#qa1').val('');
                $('#qa2').val('');
                $('#qa3').val('');
                $('#qa4').val('');
                $('#qa5').val('');
                $('#qa6').val('');
                $('#qa7').val('');
                $('#qa8').val('');
                $('#qa9').val('');
                $('#qa10').val('');
            })
        });
    </script>


    <footer class="footer">
        <div class="container">
            <p><a href="https://github.com/lydmgem">Lydia's Github |</a><a href="/api/friends"> API Friends |</a><a href="/"> Home</a></p>
        </div>
    </footer>

</body>
</html>